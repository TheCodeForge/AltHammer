{% extends "_core_centered.html" %}

{% block title %}
<title>Faction: {{ f.name }} </title>
{% endblock %}

{% block pagecontent %}

<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/">Home</a></li>
    <li class="breadcrumb-item active" aria-current="page">{{ f.name }}</li>
  </ol>
</nav>

<h1 class="small-caps">{{ f.name }}</h1>

<div class="nested-numbered-list">

{% filter numbered_markdown %}

*{{f.lore}}*

{% for rule in f.rules %}
# {{ rule }}

{{ f.rules[rule] }}

{% endfor %}

# Detachments

<ul>
{% for entry in f.detachment_listing | sort(attribute="name") %}
<li><a href="/faction/{{ f.id }}/detachment/{{ entry['id'] }}">{{ entry['name'] }}</a></li>
{% else %}
* None yet. Stay tuned!
{% endfor %} 
</ul>

# Units

<table>
  <tr></tr>
  {% for role in f.unit_listing if f.unit_listing[role] %}
  <thead>
    <tr>
      <td scope="col">{{ role }}</td>
      <td scope="col"><i class="fas fa-fw fa-tag"></i></td>
      <td scope="col"><i class="fas fa-fw fa-tally"></i></td>
      <td scope="col"><i class="fas fa-fw fa-sigma"></i></td>
    </tr>
  </thead>
  {% for unit in f.unit_listing[role] | sort(attribute="name") %}
  <tr>
    <td>{{ unit['name'] }}{{ ' ('+unit['subtitle']+')' if unit['subtitle'] else '' }}</td>
    <td>{{ unit.__dict__.get('ppm', '') }}</td>
    <td></td>
    <td></td>
  </tr>
  {% endfor %}
  {% else %}
  
  <thead>
    <tr>
      <td scope="col">None yet. Stay tuned!</td>
      <td scope="col"></td>
      <td scope="col"></td>
      <td scope="col"></td>
    </tr>
  </thead>
  {% endfor %}
</table>

{% endfilter %}

</div>
{% endblock %}
