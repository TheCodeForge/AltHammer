{% extends "_core_centered.html" %}

{% macro backside() %}
    {% if u.core_rules %}
    <p>CORE RULES: <span class="fw-bold">{{ ', '.join(u.core_rules) }}</span></p>
    {% endif %}
    {% if u.faction_rules %}
    <p>FACTION RULES: <span class="fw-bold">{{ ', '.join(u.faction_rules) }}</span></p>
    {% endif %}
    {% if u.unit_rules %}
    <p><span class="fw-bold">ABILITIES</span></p>
    <ul>
    {% for rule in u.unit_rules %}
      <li><span class="fw-bold">{{ rule['name'] }}</span> - {{ rule['text'] }}</li>
    {% endfor %}
    </ul>
    {% endif %}
    <span class="fw-bold">UNIT COMPOSITION</span>
    <ul>
      {% for entry in u.composition %}
      <li>{{ entry }}</li>
      {% endfor %}
    </ul>
    <p>Every model is equipped with: </p>
      <ul>
      {% for weapon in u.default_weapons %}
        <li>{{ weapon.name }}</li>
      {% endfor %}
      </ul>
    {% if u.replacement_gear %}
    <p>The following substitutions may be made: </p>
      <ul>
      {% for x in u.replacement_gear %}
        <li>{{ x }} may be replaced with one of:</li>
        <ul>
          {% for y in u.replacement_gear[x] %}
          <li>{{ u.weapon(y).name }}</li>
          {% endfor %}
        </ul>
      {% endfor %}
      </ul>
    {% endif %}
{% endmacro %}


{% block pagecontent %}

<h1>{{ u.name }}</h1>

<div class="row">
  <div class="col col-8">
    <div class="row">
      <table class="table w-100">
        <thead>
          <tr>
            <th scope="col">M</th>
            <th scope="col">T</th>
            <th scope="col">Sv</th>
            <th scope="col">HP</th>
            <th scope="col">Ld</th>
            <th scope="col">OC</th>
          </tr>
        </thead>
        <tr>
          <td>{{ u.move }}"</td>
          <td>{{ u.tough }}</td>
          <td>{{ u.save }}+</td>
          <td>{{ u.hp }}</td>
          <td>{{ u.lead }}+</td>
          <td>{{ u.oc }}</td>
        </tr>
      </table>

      <table class="table w-100">
        <tr></tr>
        <thead>
          <tr>
            <th scope="col">Ranged Weapons</th>
            <th scope="col">Range</th>
            <th scope="col">A</th>
            <th scope="col">RS</th>
            <th scope="col">S</th>
            <th scope="col">AP</th>
            <th scope="col">Dmg</th>
          </tr>
        </thead>
        {% for weapon in u.ranged_weapons %}
        <tr>
          <td>{{ weapon.name }}{% if weapon.keywords %} <span class="keyword">[{{ ", ".join(weapon.keywords) }}]</span>{% endif %}</td>
          <td>{{ weapon.rng }}"</td>
          <td>{{ weapon.atk }}</td>
          <td>{% if weapon.skl %}{{ weapon.skl }}+{% else %}-{% endif %}</td>
          <td>{{ weapon.str }}</td>
          <td>-{{ weapon.ap }}</td>
          <td>{{ weapon.dmg }}</td>
        </tr>
        {% endfor %}
        <thead>
          <tr>
            <th scope="col">Melee Weapons</th>
            <th scope="col">Range</th>
            <th scope="col">A</th>
            <th scope="col">MS</th>
            <th scope="col">S</th>
            <th scope="col">AP</th>
            <th scope="col">Dmg</th>
          </tr>
        </thead>
        {% for weapon in u.melee_weapons %}
        <tr>
          <td>{{ weapon.name }}{% if weapon.keywords %} <span class="keyword">[{{ ", ".join(weapon.keywords) }}]</span>{% endif %}</td>
          <td>Melee</td>
          <td>{{ weapon.atk }}</td>
          <td>{% if weapon.skl %}{{ weapon.skl }}+{% else %}-{% endif %}</td>
          <td>{{ weapon.str }}</td>
          <td>-{{ weapon.ap }}</td>
          <td>{{ weapon.dmg }}</td>
        </tr>
        {% endfor %}
      </table>
    </div>
    <div class="row">
      <div class="col col-8">
        <p>KEYWORDS: <span class="keyword">{{ ', '.join(u.keywords) }}</span></p>
      </div>
      <div class="col col-4">
        <p>FACTION: <span class="keyword">{{ ', '.join(u.faction_keywords) }}</span></p>
      </div>
    </div>
    <div class="row d-block d-md-none">
      {{ backside() }}
    </row>
  </div>
  <div class="col col-4 d-none d-md-block">
    {{ backside() }}
  </div>
</div>

{% endblock %}
